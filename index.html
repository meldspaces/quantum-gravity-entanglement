<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gravity from Quantum Entanglement</title>
    <meta property="og:title" content="Gravity from Quantum Entanglement">
    <meta property="og:description" content="See gravity emerge from pure quantum connections — live in your browser.">
    <meta property="og:image" content="https://gravity-from-entanglement.vercel.app/thumbnail.png">
    <meta property="og:url" content="https://gravity-from-entanglement.vercel.app">
    <meta name="twitter:card" content="summary_large_image">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.26.1/full/pyodide.js"></script>
    <script src="https://unpkg.com/three@0.168.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.168.0/examples/js/controls/OrbitControls.js"></script>
    <style>
        * { touch-action: pan-y pinch-zoom; }
        body { margin:0; padding:0; background:#0a0a1a; color:#ddd; font-family:system-ui,Arial,sans-serif; overflow:hidden; height:100dvh; }
        #threejs { position:absolute; top:0; left:0; width:100%; height:100%; }
        .overlay{position:absolute;padding:14px;border-radius:12px;background:rgba(0,0,30,0.94);border:2px solid #00ddff;box-shadow:0 0 20px #00ddff44;z-index:10;transition:all .3s}
        .left{top:0;left:0;width:96%;max-width:460px;margin:4px}
        .right{top:0;right:0;width:96%;max-width:360px;margin:4px}
        h1{margin:0 0 8px;color:#00ddff;font-size:1.8em}
        h2{margin:0 0 10px;color:#00ffdd;font-size:1.3em}
        button{padding:10px 20px;font-size:1.1em;background:#00ddff;color:#000;border:none;border-radius:8px;cursor:pointer;margin-top:12px;width:100%}
        label{display:block;margin:12px 0 4px;font-weight:bold}
        input[type=range]{width:100%;height:10px;border-radius:5px;background:#333;-webkit-appearance:none}
        input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;height:24px;width:24px;border-radius:50%;background:#00ddff}
        .info{margin-top:14px;line-height:1.55;font-size:0.95em}
        #charts{position:absolute;bottom:0;left:0;width:100%;height:180px;background:rgba(0,0,30,0.8);padding:8px;box-sizing:border-box;display:flex;gap:8px;z-index:10}
        canvas.chart{flex:1;background:#111122;border-radius:8px}
        @media(max-width:920px){.left,.right{width:100%;margin:0;border-radius:0}.right{top:auto;bottom:190px;border-radius:12px 12px 0 0}#charts{height:160px}}
    </style>
</head>
<body>
<div id="threejs"></div>

<div class="overlay left">
    <h1>Gravity from Entanglement</h1>
    <p>Watch gravity appear from quantum connections — live.</p>
    <label>Mass strength: <span id="massValue">1200</span></label>
    <input type="range" id="mass" min="100" max="4000" step="50" value="1200">
    <button onclick="runSimulation()">Update Gravity</button>
    <div class="info">
        <strong>What you see:</strong><br>
        ● Blue dots — 20 000 linked quantum particles<br>
        ● Red ball — “Mass” = missing links<br>
        ● Green arrows — Force pulling to restore links<br><br>
        <em>No curved space. No gravitons. Just entanglement.</em>
    </div>
</div>

<div class="overlay right">
    <h2>Legend</h2>
    <div style="line-height:1.6;font-size:0.95em">
        <div>● <strong style="color:#00ddff">Blue cloud</strong> – Quantum particles</div>
        <div>● <strong style="color:#ff3366">Red sphere</strong> – “Mass”</div>
        <div>→ <strong style="color:#00ff99">Green arrows</strong> – Gravity force</div>
    </div>
    <div style="margin-top:16px;font-size:0.9em;color:#aaffaa">Drag • Pinch • Slide mass</div>
</div>

<div id="charts">
    <canvas id="forceChart" class="chart"></canvas>
    <canvas id="potentialChart" class="chart"></canvas>
</div>

<script>
let scene,camera,renderer,controls,particles,massSphere,arrows=[];let chartForce,chartPotential;
function init3D(){scene=new THREE.Scene();scene.background=new THREE.Color(0x0a0a1a);camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,0.1,200);camera.position.set(30,25,30);renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setSize(innerWidth,innerHeight);document.getElementById('threejs').appendChild(renderer.domElement);controls=new THREE.OrbitControls(camera,renderer.domElement);controls.enableDamping=!0;scene.add(new THREE.AmbientLight(0x404060));scene.add(new THREE.DirectionalLight(0x00ddff,1.2)).position.set(50,50,50);scene.add(new THREE.GridHelper(50,25,0x004444,0x002222));const g=new THREE.BufferGeometry(),pos=new Float32Array(6e4);for(let i=0;i<2e4;i++){const r=18*Math.cbrt(Math.random()),t=Math.random()*Math.PI*2,p=Math.acos(2*Math.random()-1);pos[3*i]=r*Math.sin(p)*Math.cos(t);pos[3*i+1]=r*Math.sin(p)*Math.sin(t);pos[3*i+2]=r*Math.cos(p)}g.setAttribute('position',new THREE.BufferAttribute(pos,3));particles=new THREE.Points(g,new THREE.PointsMaterial({color:0x00ddff,size:0.2,transparent:!0,opacity:.85}));scene.add(particles);const mg=new THREE.SphereGeometry(2,64,64),mm=new THREE.MeshPhongMaterial({color:0xff3366,emissive:0xff0044,emissiveIntensity:.8});massSphere=new THREE.Mesh(mg,mm);scene.add(massSphere);animate()}function animate(){requestAnimationFrame(animate);controls.update();particles.rotation.y+=0.0004;renderer.render(scene,camera)}addEventListener('resize',()=>{camera.aspect=innerWidth/innerHeight;camera.updateProjectionMatrix();renderer.setSize(innerWidth,innerHeight)});let pyodideReady=!1;async function initPyodide(){if(!pyodideReady){window.pyodide=await loadPyodide();await window.pyodide.loadPackage('numpy');pyodideReady=!0}}function clearArrows(){arrows.forEach(a=>scene.remove(a));arrows=[]}async function runSimulation(){await initPyodide();const M=+document.getElementById('mass').value;document.getElementById('massValue').textContent=M;massSphere.scale.setScalar(Math.pow(M/1200,1/3));clearArrows();const code=`import numpy as np\nN=20000\nnp.random.seed(1)\nr=18*np.cbrt(np.random.rand(N))\ntheta=np.random.rand(N)*2*np.pi\nphi=np.arccos(2*np.random.rand(N)-1)\npositions=np.column_stack((r*np.sin(phi)*np.cos(theta),r*np.sin(phi)*np.sin(theta),r*np.cos(phi)))\nM=${M}\nalpha=0.062\neps=0.7\ndef delta_S(p):d=np.linalg.norm(positions-p,axis=1)+eps;return -M*np.mean(np.log(d)+alpha/d)\ndef force(p):h=0.005;g=np.zeros(3)\n for i in range(3):dp=np.zeros(3);dp[i]=h;g[i]=(delta_S(p+dp)-delta_S(p-dp))/(2*h)\n return g,delta_S(p)\npoints=[]\nfor r in np.linspace(4,20,7):\n for th in np.linspace(0,np.pi,5):\n  for ph in np.linspace(0,2*np.pi,16,endpoint=False)[::4]:\n   pos=np.array([r*np.sin(th)*np.cos(ph),r*np.sin(th)*np.sin(ph),r*np.cos(th)])\n   f,_=force(pos)\n   points.append([*pos,*f])\nr1d=np.linspace(3,20,100)\nforce1d=[-np.linalg.norm(force(np.array([rr,0,0]))[0]) for rr in r1d]\npot1d=[delta_S(np.array([rr,0,0])) for rr in r1d]\n[points,r1d.tolist(),force1d,pot1d]`;let result=await window.pyodide.runPythonAsync(code);let[arrowData,r1d,force1d,pot1d]=result.toJs();arrowData.forEach(p=>{const o=new THREE.Vector3(p[0],p[1],p[2]),d=new THREE.Vector3(p[3],p[4],p[5]),l=d.length();if(l<0.01)return;d.normalize();const a=new THREE.ArrowHelper(d,o,l*15,0x00ff99,l*4,l*3);arrows.push(a);scene.add(a)});if(chartForce)chartForce.destroy();if(chartPotential)chartPotential.destroy();chartForce=new Chart(document.getElementById('forceChart'),{type:'line',data:{labels:r1d,datasets:[{label:'Entanglement Force',data:force1d,borderColor:'#00ff99',tension:.2},{label:'Newton 1/r²',data:r1d.map(r=>-8000/(r*r)),borderColor:'#ff6600',borderDash:[6,4]}]},options:{responsive:!0,plugins:{title:{display:!0,text:'Force',color:'#fff',font:{size:14}}},scales:{x:{display:!1},y:{display:!1}}}});chartPotential=new Chart(document.getElementById('potentialChart'),{type:'line',data:{labels:r1d,datasets:[{label:'Potential',data:pot1d,borderColor:'#00ddff'}]},options:{responsive:!0,plugins:{title:{display:!0,text:'Potential',color:'#fff',font:{size:14}}},scales:{x:{display:!1},y:{display:!1}}}})}document.getElementById('mass').addEventListener('input',e=>document.getElementById('massValue').textContent=e.target.value);init3D();onload=()=>initPyodide().then(()=>runSimulation());
</script>
</body>
</html>
